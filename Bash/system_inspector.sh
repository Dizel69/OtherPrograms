#!/usr/bin/env bash

# =============================================
# ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: Ð¡Ð±Ð¾Ñ€ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ð¾Ð¹ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
# =============================================

# Ð¤Ð°Ð¹Ð» Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð²Ñ‹Ð²Ð¾Ð´ Ð½Ð° ÑÐºÑ€Ð°Ð½)
readonly OUTPUT=""

# Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ: Ð²Ñ‹Ð²Ð¾Ð´ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° ÑÐµÐºÑ†Ð¸Ð¸
print_section() {
    local title="$1"
    echo -e "\nðŸ”¹ ===== $title ===== ðŸ”¹" | tee -a "${OUTPUT}" 2>/dev/null
}

# Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ: Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¸ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
run_cmd() {
    local cmd_desc="$1"
    local cmd="$2"
    print_section "${cmd_desc}"
    eval "${cmd}" | tee -a "${OUTPUT}" 2>/dev/null
}

# ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
run_cmd "ÐžÐ±Ñ‰Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ (uname, hostnamectl)" "uname -a; hostnamectl"
run_cmd "Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ CPU" "lscpu"
run_cmd "Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð°Ð¼ÑÑ‚Ð¸" "free -h; cat /proc/meminfo"
run_cmd "Ð¤Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸ Ð¿Ð°Ð¼ÑÑ‚Ð¸ (dmidecode)" "sudo dmidecode --type memory"
run_cmd "Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð´Ð¸ÑÐºÐ°Ñ… Ð¸ Ñ€Ð°Ð·Ð´ÐµÐ»Ð°Ñ…" "lsblk; df -h"
run_cmd "Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð²Ð¸Ð´ÐµÐ¾ÐºÐ°Ñ€Ñ‚Ðµ" "lspci | grep -i vga"
run_cmd "Ð¡Ð¿Ð¸ÑÐ¾Ðº USB-ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²" "lsusb"
run_cmd "ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð±Ð»Ð¾ÐºÐ°Ñ… ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²" "sudo lshw -short"

echo -e "\nâœ… Ð¡Ð±Ð¾Ñ€ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÑ‘Ð½." | tee -a "${OUTPUT}" 2>/dev/null
